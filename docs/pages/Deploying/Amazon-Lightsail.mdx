---

title: 在 Amazon Lightsail 上托管 DocsGPT
description: 
display: hidden
---

# 在 Amazon Lightsail 上自托管 DocsGPT

以下是设置 Amazon Lightsail 实例以托管 DocsGPT 的逐步指南。

## 配置您的实例

(如果您知道如何创建 Lightsail 实例，可以通过点击[此处](#connecting-to-your-newly-created-instance)跳转到推荐配置部分)。

### 1. 创建 AWS 账户：

如果尚未拥有，请访问 https://lightsail.aws.amazon.com 创建或登录您的 AWS 账户。

### 2. 创建实例：

a. 点击"创建实例"。

b. 选择"实例位置"。大多数情况下默认位置即可。

c. 选择"Linux/Unix"作为镜像，"Ubuntu 20.04 LTS"作为操作系统。

d. 根据需求配置实例方案。推荐大多数场景使用"1 GB内存、1vCPU、40GB SSD和2TB传输"的配置。

e. 为实例命名后点击"创建实例"。

注：实例设置可能需要几分钟完成。

### 连接新创建的实例

实例创建完成后几分钟即可使用。要访问它，请打开实例并点击"使用SSH连接"。

#### 克隆 DocsGPT 仓库

终端窗口将弹出，第一步是克隆 DocsGPT 的 Git 仓库：

`git clone https://github.com/arc53/DocsGPT.git`

#### 下载包信息

克隆仓库完成后，需要从所有源下载包信息。执行以下命令：

`sudo apt update`

#### 安装 Docker 和 Docker Compose

DocsGPT 后端和 worker 使用 Python，前端基于 React 编写，整个应用通过 Docker 容器化。安装 Docker 和 Docker Compose 需执行以下命令：

`sudo apt install docker.io`

接着安装 docker-compose：

`sudo apt install docker-compose`

#### 进入 DocsGPT 目录

执行以下命令进入包含 DocsGPT docker-compose 文件的目录：

`cd DocsGPT/`

#### 准备环境

在 DocsGPT 目录下创建 `.env` 文件，并将 `.env_sample` 的内容复制到其中：

`nano .env`

确保你的 `.env` 文件内容如下：

```
OPENAI_API_KEY=(Your OpenAI API key)
VITE_API_STREAMING=true
SELF_HOSTED_MODEL=false
```

保存文件请按 CTRL+X，然后按 Y，最后按 ENTER。

接下来，通过编辑 docker-compose.yml 文件设置正确的后端 IP：

`nano deployment/docker-compose.yaml`

将第 7 行修改为：`VITE_API_HOST=http://<你的实例公网IP>:7091`

这将允许前端连接到后端。

#### 运行应用

即将大功告成！所有必要的组件都已安装完毕，现在可以运行应用程序了。请使用以下命令启动：

`sudo docker compose -f deployment/docker-compose.yaml up -d`

首次启动需要几分钟时间下载所有依赖项并完成构建。

完成后即可关闭终端窗口。

#### 启用端口

a. 访问在线实例前，需先启用其使用的端口

b. 打开Lightsail实例，进入"Networking"（网络）选项卡

c. 在"IPv4 Firewall"（IPv4防火墙）下点击"Add rule"（添加规则），输入端口号`5173`后点击"Create"（创建）
对端口`7091`重复相同操作

#### 访问实例

现在可通过公网IP地址的5173端口访问您的实例。祝您使用DocsGPT愉快！