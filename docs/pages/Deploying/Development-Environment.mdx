---

title: 设置开发环境
description: 配置DocsGPT开发环境的指南，包括后端和前端设置。
---

# 设置开发环境

本指南将引导您完成DocsGPT开发环境的配置。此设置允许您修改和测试应用程序的后端与前端组件。

## 1. 启动MongoDB和Redis

出于开发目的，您可以快速启动MongoDB和Redis容器，这是DocsGPT使用的主要数据库和缓存系统。我们在`deployment`目录中提供了一个专用的Docker Compose文件`docker-compose-dev.yaml`，仅包含这些基础服务。

您可以在[此处](https://github.com/arc53/DocsGPT/blob/main/deployment/docker-compose-dev.yaml)找到`docker-compose-dev.yaml`文件。

**启动MongoDB和Redis的步骤：**

1. 在终端中导航至您的DocsGPT仓库根目录。

2. 运行以下命令来构建并启动`docker-compose-dev.yaml`中定义的容器：

    ```bash
    docker compose -f deployment/docker-compose-dev.yaml build
    docker compose -f deployment/docker-compose-dev.yaml up -d
    ```

    这些命令将以分离模式在后台启动MongoDB和Redis。

## 2. 运行后端

要在本地运行 DocsGPT 后端，您需要配置 Python 环境并安装必要的依赖项。

**先决条件：**

*   **Python 3.12：** 确保您的系统已安装 Python 3.12。您可以在终端中运行 `python --version` 或 `python3 --version` 来检查 Python 版本。

**运行后端的步骤：**

1.  **配置环境变量：**

    DocsGPT 后端设置通过环境变量进行配置。您可以在 `.env` 文件中或直接在 `settings.py` 文件中设置这些变量。有关所有设置的完整概述，请参阅 [DocsGPT 设置指南](/Deploying/DocsGPT-Settings)。

    *   **选项 1：使用 `.env` 文件（推荐）：**
        *   如果尚未创建，请在 DocsGPT 项目的 **根目录** 下创建一个名为 `.env` 的文件。
        *   根据需要修改 `.env` 文件中的设置。您可以在 [`application/core/settings.py`](application/core/settings.py) 中找到可配置选项的完整列表。

    *   **选项 2：导出环境变量：**
        *   或者，您可以直接在终端中导出环境变量。但通常来说，使用 `.env` 文件在开发中更为规范。

2.  **创建 Python 虚拟环境（可选但推荐）：**

    使用虚拟环境可以隔离项目依赖，避免与系统全局的 Python 包发生冲突。

    *   **macOS 和 Linux：**

        ```bash
        python -m venv venv
        . venv/bin/activate
        ```

    *   **Windows：**

        ```bash
        python -m venv venv
         venv/Scripts/activate
        ```

3.  **下载嵌入模型：**

    后端需要一个嵌入模型。下载 `mpnet-base-v2` 模型并将其放置在项目根目录下的 `model/` 目录中。您可以使用以下脚本：

    ```bash
    wget https://d3dg1063dc54p9.cloudfront.net/models/embeddings/mpnet-base-v2.zip
    unzip mpnet-base-v2.zip -d model
    rm mpnet-base-v2.zip
    ```

    或者，您可以手动从 [此处](https://d3dg1063dc54p9.cloudfront.net/models/embeddings/mpnet-base-v2.zip) 下载 zip 文件，解压后将其放置在 `model/` 目录中。

4.  **安装后端依赖：**

    进入 DocsGPT 仓库的根目录，安装所需的 Python 包：

    ```bash
    pip install -r application/requirements.txt
    ```

5.  **运行 Flask 应用：**

    启动 Flask 后端应用程序：

    ```bash
    flask --app application/app.py run --host=0.0.0.0 --port=7091
    ```

    此命令将启动后端服务器，使其可在 `http://localhost:7091` 上访问。

6.  **启动 Celery Worker：**

    打开一个新的终端窗口（如果使用了虚拟环境，请先激活）。启动 Celery worker 以处理后台任务：

    ```bash
    celery -A application.app.celery worker -l INFO
    ```

    此命令将启动 Celery worker，用于处理文档解析和向量嵌入等任务。

**在调试器中运行 (VSCode):**

为便于调试，您可以直接通过 VSCode 调试器启动 Flask 应用和 Celery 工作进程。

*   在 macOS 上按 <kbd>Shift</kbd> + <kbd>Cmd</kbd> + <kbd>D</kbd> 或在 Windows 上按 <kbd>Shift</kbd> + <kbd>Windows</kbd> + <kbd>D</kbd> 打开"运行和调试"视图。
*   您会看到名为"Flask"和"Celery"的配置。选择所需配置后点击"开始调试"按钮（绿色播放图标）。

## 3. 启动前端

要在本地运行 DocsGPT 前端，您需要安装 Node.js 和 npm (Node 包管理器)。

**先决条件:**

*   **Node.js 16 或更高版本:** 确保已安装 Node.js 16 及以上版本。您可以在终端运行 `node -v` 检查版本。npm 通常随 Node.js 一起安装。

**启动前端步骤:**

1. **进入前端目录：**

    在终端中，切换到 DocsGPT 仓库内的 `frontend` 文件夹：

    ```bash
    cd frontend
    ```

2. **安装全局包（如需）：**

    如果尚未全局安装 `husky` 和 `vite`，可执行以下命令：

    ```bash
    npm install husky -g
    npm install vite -g
    ```
    若已安装这些包或倾向使用本地安装，可跳过此步骤（全局安装能简化本指南中的命令执行）。

3. **安装前端依赖：**

    使用 npm 安装项目的前端依赖：

    ```bash
    npm install --include=dev
    ```

    该命令会读取 `frontend` 目录下的 `package.json` 文件，并安装所有列出的依赖项（包括开发依赖）。

4. **运行前端应用：**

    启动前端开发服务器：

    ```bash
    npm run dev
    ```

    此命令将启动 Vite 开发服务器，前端应用通常可通过 [http://localhost:5173/](http://localhost:5173/) 访问。终端会显示前端运行的具体 URL。

当后端和前端同时运行时，您将获得一个功能完整的 DocsGPT 开发环境。现在可通过浏览器访问 [http://localhost:5173/](http://localhost:5173/) 开始开发！